# source: https://splitlunch-api.now.sh
# timestamp: Sun Apr 28 2019 22:16:34 GMT+0200 (GMT+02:00)

schema {
  query: RootQuery
  mutation: RootMutation
}

type AuthData {
  userId: ID!
  token: String!
  tokenExpiry: Int!
}

type Order {
  _id: ID!
  name: String!
  description: String
  sumTotal: Float!
  date: String!
  participants: [User!]
  details: [OrderItem!]
  finalized: Boolean!
  creator: User!
  createdAt: String!
  updatedAt: String!
}

input OrderInput {
  name: String!
  description: String
  date: String!
}

type OrderItem {
  _id: ID!
  item: String!
  price: Float!
  order: Order!
  participant: User!
  createdAt: String!
  updatedAt: String!
}

input OrderItemInput {
  orderId: ID!
  participant: ID!
  item: String!
  price: Float!
}

type RootMutation {
  createUser(userInput: UserInput): User
  createOrder(orderInput: OrderInput): Order!
  createOrderItem(orderItemInput: OrderItemInput): OrderItem!
  deleteOrderItem(orderItemId: ID!): Order!
  joinOrder(orderId: ID!): Order!
  leaveOrder(orderId: ID!): Order!
  finalizeOrder(orderId: ID!): Order!
}

type RootQuery {
  orders: [Order!]!
  order(id: ID!): Order!
  orderItems(orderId: ID!): [OrderItem!]!
  users: [User!]!
  user(id: ID!): User!
  login(email: String!, password: String!): AuthData!
}

type User {
  _id: ID!
  email: String!
  password: String
  name: String
  balance: Float
  orders: [Order!]
}

input UserInput {
  email: String!
  password: String!
  name: String
}
